<!DOCTYPE html>
<html lang="en">
  <head>
	  <title>Chat with the developer - MinerBot the Discord Bot</title>
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
  </head>
<body>
	<div id="ex"></div>
	<!--<div class="container" style="{width:80%;right:0px;}">--><chatbubble><msg class="out" id="outmsg"></msg></chatbubble>
	<div id="outmsgs"></div>
	<div id="inmsgs"></div>

	<chatbubble><msg class="in" id="inmsg">hi</msg></chatbubble>
    <input type="text" id="txt" onkeydown="keydown(event)">
<script>
	fetch('chats/dev.json')
                        .then(function (response) {
                        return response.json();
                    })
                        .then(function (data) {
                        appendData(data);
                    })
                        .catch(function (err) {
                        console.log(err);
		document.getElementById('ex').innerHTML = err;
                    });
			
	function appendData(data) {
		for (var o = 0; o < data.length; o++) {
		var indata = data[o].direction.includes('in');
		var outdata = data[o].direction.includes('out');
			if (data[o].direction === 'in') {
				var main = document.getElementById('inmsgs');
				var bub = document.createElement('chatbubble');
				var msg = document.createElement('msg');
				var att = document.createAttribute('class');
				var att2 = document.createAttribute('id');
				main.appendChild(bub);
				att.value = 'in';
				att2.value = 'inmsg';
				bub.appendChild(msg);
				msg.setAttributeNode(att);
				msg.setAttributeNode(att2);
				msg.innerHTML = indata; // data[o].msg;
			}
			else if (data[o].direction === 'out') {
				var main = document.getElementById('outmsgs');
				main.appendChild(bub);
				att.value = 'out';
				att2.value = 'outmsg';
				bub.appendChild(msg);
				msg.setAttributeNode(att);
				msg.setAttributeNode(att2);
				msg.innerHTML = outdata; // data[o].msg;
			}
		}
	}

function keydown(event) {
    if (event.key === "Enter") {
    var text = document.getElementById('txt').value;
	    var main = document.getElementById('outmsgs');
	    var bub = document.createElement('chatbubble');
	    var message = document.createElement('msg');
	    var att = document.createAttribute('class');
	    var att2 = document.createAttribute('id');
	main.appendChild(bub);
			att.value = 'out';
			att2.value = 'outmsg';
	bub.appendChild(message);
			message.setAttributeNode(att);
			message.setAttributeNode(att2);
	    message.innerHTML = text;
if (text === 'hi') {
	document.getElementById('inmsg').innerHTML = 'hey!';
}
    
    }
      };
      </script>
  </body>
</html>
